{% extends "base.html"%}

{% load static %}
<!--TITULAR-->

<!--foto de fons del titular-->


<!--Títol-->

{%block titulartitle%}Proposa canvis a un restaurant{%endblock titulartitle%}

<!--Descripció-->

{%block titulardescripcio%}Has trobat informació incorrecta d'un restaurant? Ajuda'ns a
canviar-la!{%endblock titulardescripcio%}

<!--Menú d'on sóc-->

{%block routeslist%}
<li style="color: #999"><a href="/quiSom/" style="text-decoration: none;">Pamboliada</a></li>
<li style="color: #999"><a href="/suggeriments/" style="text-decoration: none;">Suggeriments</a></li>
<li class="active">Proposa canvis a un restaurant</li>
{%endblock routeslist%}

<!--CONTINGUT DE LA PÀGINA-->

{%block alerts%}
<div id="enviasuggeriment" class="alert alert-success position-fixed centered-alert text-center" role="alert"
    style="z-index: 1000; display: none;">
    <p>El suggeriment ha estat enviat satisfactòriament.</p>
</div>
<div id="errorenviasuggeriment" class="alert alert-danger position-fixed centered-alert text-center" role="alert"
    style="z-index: 1000; display: none;">
    <h4 class="alert-heading">Error!</h4>
    <p>Per favor, corregeix els camps marcats en vermell.</p>
</div>
{% endblock alerts%}

{%block content%}
{% if user.is_authenticated %}
<!--SUGGEREIX EL CANVI D'INFORMACIÓ D'UN RESTAURANT-->
<div class="aboutus-secktion paddingTB30">
    <div class="container">
        <div id="searchbar" class="navbar-nav btn ml-auto nav-flex pr-0" data-toggle="collapse">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><em class="fas fa-search" aria-hidden="true"></em></span>
                </div>
                <input title="Cerca Restaurants" type="text" class="form-control" placeholder="Cerca Restaurants">
            </div>
        </div>
        <hr class="my-4" />
        <div class="row">
            <div class="input-group form-group">
            <div class="embed-responsive embed-responsive-16by9">
            <iframe id="mapaRestaurants"
    title="Mapa"
    class="embed-responsive-item"
    src="{% static 'openstreetmap/mapes/mapa_restaurant_suggeriment.html'%}"> <!--bbox: Bounding box, values separated by comma (%2C) in the format left,bottom,right,top-->
</iframe>
</div>
                <!--<img class="img-fluid p-3" src="{% static 'images/map.png' %}" style="margin:auto;" />-->
            </div>
        </div>
        
{% if restaurant %}
<div class="container">
    <div class="card">
        <div class="card-body">
        <form id="form-suggeriment" method="POST" action="{% url 'actualitza_restaurant_suggeriment' %}?id={{ restaurant.id }}">
        {% csrf_token %}
        <div class="row text-center my-auto p-3">
                <h3 class="font-weight-bold" id="restaurant-seleccionat" style="margin: auto;">{{ restaurant.nom }}</h3>
        </div>
        <hr class="my-3 mb-5" />
        <div class="row">
        <label class="font-weight-bold">Motiu de la modificació d'aquest restaurant <span id="errorexplicacio" class="text-danger"></span></label>
        <textarea id="explicacio" name="explicacio" title="Explicacio" type="text" class="form-control" rows="3"
                            style="resize: none;"></textarea>
        <small class="text-muted">Per favor, fes una breu explicació de per què s'ha de modificar aquest restaurant.</small>
        </div>
        <hr class="my-4"/>
        <div class="row">
            <div class="col my-auto text-center p-2">
                <button title="Cancel·la" type="button" class="btn btn-danger btn-md">Cancel·la</button>
            </div>
            <div class="col my-auto text-center p-2">
                <button id="envia" title="Envia" type="submit" class="btn btn-primary btn-md">Envia</button>
            </div>
        </div>
        </form>
    </div>
</div>
{% endif %}

{% else %}
<!-- Mostra un missatge, ja que per realitzar un suggeriment s'ha d'estar registrat o s'ha d'haver iniciat sessió -->

{% include "suggeriments_info.html" %}

{% endif %}

{%endblock content%}
{%block ownscripts%}
<script type="text/javascript" src="{% static 'js/actu_restaurant.js' %}"></script>
{%endblock ownscripts%}